"use strict";
/*
 * MIT License
 *
 * Copyright (c) 2019 RÃ©mi Van Keisbelck
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.withReduxDevTools = void 0;
function defaultTeaCupToReduxMessage(msg) {
    const { tag, type } = msg, others = __rest(msg, ["tag", "type"]);
    return Object.assign({ type: type || tag }, others);
}
function withReduxDevTools(dt, options) {
    const reduxDevtoolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__;
    if (reduxDevtoolsExtension) {
        const reduxDevTools = reduxDevtoolsExtension.connect(options);
        reduxDevTools.subscribe((message) => {
            var _a, _b;
            if (message.type === 'DISPATCH' && message.state) {
                // console.log('DISPATCH', message.payload);
                if (((_a = message.payload) === null || _a === void 0 ? void 0 : _a.type) === 'JUMP_TO_ACTION' || ((_b = message.payload) === null || _b === void 0 ? void 0 : _b.type) === 'JUMP_TO_STATE') {
                    // console.log('travelling to ', message.payload.actionId);
                    dt.travelTo(message.payload.actionId);
                }
            }
        });
        const teacupToReduxMessage = (options === null || options === void 0 ? void 0 : options.teacupToReduxMessage) || defaultTeaCupToReduxMessage;
        dt.addListener((e) => {
            switch (e.tag) {
                case 'init':
                    reduxDevTools.init(e.model);
                    break;
                case 'updated':
                    const action = teacupToReduxMessage(e.msg);
                    reduxDevTools.send(action, e.modelAfter);
                    break;
            }
        });
    }
    return dt;
}
exports.withReduxDevTools = withReduxDevTools;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVkdXhEZXZUb29scy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9UZWFDdXAvUmVkdXhEZXZUb29scy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBdUJHOzs7Ozs7Ozs7Ozs7OztBQVFILFNBQVMsMkJBQTJCLENBQUMsR0FBUTtJQUMzQyxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksS0FBZ0IsR0FBRyxFQUFkLE1BQU0sVUFBSyxHQUFHLEVBQTlCLGVBQXdCLENBQU0sQ0FBQztJQUNyQyx1QkFDRSxJQUFJLEVBQUUsSUFBSSxJQUFJLEdBQUcsSUFDZCxNQUFNLEVBQ1Q7QUFDSixDQUFDO0FBOEVELFNBQWdCLGlCQUFpQixDQUMvQixFQUF3QixFQUN4QixPQUE4QjtJQUU5QixNQUFNLHNCQUFzQixHQUE0QixNQUFjLENBQUMsNEJBQTRCLENBQUM7SUFDcEcsSUFBSSxzQkFBc0IsRUFBRTtRQUMxQixNQUFNLGFBQWEsR0FBRyxzQkFBc0IsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDOUQsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQTZCLEVBQUUsRUFBRTs7WUFDeEQsSUFBSSxPQUFPLENBQUMsSUFBSSxLQUFLLFVBQVUsSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFO2dCQUNoRCw0Q0FBNEM7Z0JBQzVDLElBQUksT0FBQSxPQUFPLENBQUMsT0FBTywwQ0FBRSxJQUFJLE1BQUssZ0JBQWdCLElBQUksT0FBQSxPQUFPLENBQUMsT0FBTywwQ0FBRSxJQUFJLE1BQUssZUFBZSxFQUFFO29CQUMzRiwyREFBMkQ7b0JBQzNELEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDdkM7YUFDRjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxvQkFBb0IsR0FBRyxDQUFBLE9BQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxvQkFBb0IsS0FBSSwyQkFBMkIsQ0FBQztRQUMxRixFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDbkIsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFO2dCQUNiLEtBQUssTUFBTTtvQkFDVCxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDNUIsTUFBTTtnQkFDUixLQUFLLFNBQVM7b0JBQ1osTUFBTSxNQUFNLEdBQUcsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUMzQyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7b0JBQ3pDLE1BQU07YUFDVDtRQUNILENBQUMsQ0FBQyxDQUFDO0tBQ0o7SUFDRCxPQUFPLEVBQUUsQ0FBQztBQUNaLENBQUM7QUE5QkQsOENBOEJDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIE1JVCBMaWNlbnNlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFLDqW1pIFZhbiBLZWlzYmVsY2tcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4gKiBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbiAqIFNPRlRXQVJFLlxuICpcbiAqL1xuXG5pbXBvcnQgeyBEZXZUb29scyB9IGZyb20gJy4vRGV2VG9vbHMnO1xuXG5pbnRlcmZhY2UgUmVkdXhNc2cge1xuICB0eXBlOiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRUZWFDdXBUb1JlZHV4TWVzc2FnZShtc2c6IGFueSk6IFJlZHV4TXNnIHtcbiAgY29uc3QgeyB0YWcsIHR5cGUsIC4uLm90aGVycyB9ID0gbXNnO1xuICByZXR1cm4ge1xuICAgIHR5cGU6IHR5cGUgfHwgdGFnLFxuICAgIC4uLm90aGVycyxcbiAgfTtcbn1cblxuaW50ZXJmYWNlIFJlZHV4RGV2VG9vbHNNZXNzYWdlIHtcbiAgcmVhZG9ubHkgdHlwZTogJ0RJU1BBVENIJyB8ICdBQ1RJT04nIHwgJ0lNUE9SVCcgfCAnRVhQT1JUJyB8ICdVUERBVEUnIHwgJ1NUQVJUJyB8ICdTVE9QJztcbiAgcmVhZG9ubHkgcGF5bG9hZD86IHtcbiAgICByZWFkb25seSB0eXBlOlxuICAgICAgfCAnSlVNUF9UT19TVEFURSdcbiAgICAgIHwgJ0pVTVBfVE9fQUNUSU9OJ1xuICAgICAgfCAnVE9HR0xFX0FDVElPTidcbiAgICAgIHwgJ1JFT1JERVJfQUNUSU9OJ1xuICAgICAgfCAnSU1QT1JUX1NUQVRFJ1xuICAgICAgfCAnTE9DS19DSEFOR0VTJ1xuICAgICAgfCAnUEFVU0VfUkVDT1JESU5HJztcbiAgICByZWFkb25seSBpbmRleDogbnVtYmVyO1xuICAgIHJlYWRvbmx5IGFjdGlvbklkOiBudW1iZXI7XG4gIH07XG4gIHJlYWRvbmx5IHN0YXRlPzogYW55O1xufVxuXG5pbnRlcmZhY2UgUmVkdXhEZXZ0b29scyB7XG4gIHN1YnNjcmliZShsaXN0ZW5lcjogKG1lc3NhZ2U6IFJlZHV4RGV2VG9vbHNNZXNzYWdlKSA9PiB2b2lkKTogdm9pZDtcbiAgdW5zdWJzY3JpYmUoKTogdm9pZDtcbiAgc2VuZChhY3Rpb246IHN0cmluZyB8IFJlZHV4TXNnLCBzdGF0ZTogYW55KTogdm9pZDtcbiAgaW5pdChzdGF0ZTogYW55KTogdm9pZDtcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWR1eERldlRvb2xzT3B0aW9ucyB7XG4gIHJlYWRvbmx5IHRlYWN1cFRvUmVkdXhNZXNzYWdlOiAobXNnOiBhbnkpID0+IFJlZHV4TXNnO1xuICByZWFkb25seSBuYW1lPzogc3RyaW5nO1xuICByZWFkb25seSBhY3Rpb25zQ3JlYXRvcnM/OiBhbnk7IC8vIFRPRE9cbiAgcmVhZG9ubHkgbGF0ZW5jeT86IG51bWJlcjtcbiAgcmVhZG9ubHkgbWF4QWdlPzogbnVtYmVyO1xuICByZWFkb25seSB0cmFjZT86IGJvb2xlYW47XG4gIHJlYWRvbmx5IHRyYWNlTGltaXQ/OiBudW1iZXI7XG4gIHJlYWRvbmx5IHNlcmlhbGl6ZT86XG4gICAgfCBib29sZWFuXG4gICAgfCB7XG4gICAgICAgIGRhdGU/OiBib29sZWFuO1xuICAgICAgICByZWdleD86IGJvb2xlYW47XG4gICAgICAgIHVuZGVmaW5lZD86IGJvb2xlYW47XG4gICAgICAgIGVycm9yPzogYm9vbGVhbjtcbiAgICAgICAgc3ltYm9sPzogYm9vbGVhbjtcbiAgICAgICAgbWFwPzogYm9vbGVhbjtcbiAgICAgICAgc2V0PzogYm9vbGVhbjtcbiAgICAgICAgZnVuY3Rpb24/OiBib29sZWFuIHwgRnVuY3Rpb247XG4gICAgICB9O1xuICBhY3Rpb25TYW5pdGl6ZXI/KGFjdGlvbjogYW55LCBpZDogbnVtYmVyKTogYW55O1xuICBzdGF0ZVNhbml0aXplcj8oc3RhdGU6IGFueSwgaW5kZXg/OiBudW1iZXIpOiBhbnk7XG4gIHJlYWRvbmx5IGFjdGlvbnNCbGFja2xpc3Q/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgcmVhZG9ubHkgYWN0aW9uc1doaXRlbGlzdD86IHN0cmluZyB8IHN0cmluZ1tdO1xuICBwcmVkaWNhdGU/KHN0YXRlOiBhbnksIGFjdGlvbjogYW55KTogYm9vbGVhbjtcbiAgcmVhZG9ubHkgc2hvdWxkUmVjb3JkQ2hhbmdlcz86IGJvb2xlYW47XG4gIHJlYWRvbmx5IHBhdXNlQWN0aW9uVHlwZT86IHN0cmluZztcbiAgcmVhZG9ubHkgYXV0b1BhdXNlPzogYm9vbGVhbjtcbiAgcmVhZG9ubHkgc2hvdWxkU3RhcnRMb2NrZWQ/OiBib29sZWFuO1xuICByZWFkb25seSBzaG91bGRIb3RSZWxvYWQ/OiBib29sZWFuO1xuICByZWFkb25seSBzaG91bGRDYXRjaEVycm9ycz86IGJvb2xlYW47XG4gIHJlYWRvbmx5IGZlYXR1cmVzPzoge1xuICAgIHJlYWRvbmx5IHBhdXNlPzogYm9vbGVhbjtcbiAgICByZWFkb25seSBsb2NrPzogYm9vbGVhbjtcbiAgICByZWFkb25seSBwZXJzaXN0PzogYm9vbGVhbjtcbiAgICByZWFkb25seSBleHBvcnQ/OiBib29sZWFuIHwgJ2N1c3RvbSc7XG4gICAgcmVhZG9ubHkgaW1wb3J0PzogYm9vbGVhbiB8ICdjdXN0b20nO1xuICAgIHJlYWRvbmx5IGp1bXA/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IHNraXA/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IHJlb3JkZXI/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGRpc3BhdGNoPzogYm9vbGVhbjtcbiAgICByZWFkb25seSB0ZXN0PzogYm9vbGVhbjtcbiAgfTtcbn1cblxuaW50ZXJmYWNlIFJlZHV4RGV2VG9vbHNFeHRlbnNpb24ge1xuICAob3B0aW9ucz86IFJlZHV4RGV2VG9vbHNPcHRpb25zKTogUmVkdXhEZXZ0b29scztcbiAgY29ubmVjdChvcHRpb25zPzogUmVkdXhEZXZUb29sc09wdGlvbnMpOiBSZWR1eERldnRvb2xzO1xuICBkaXNjb25uZWN0KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRoUmVkdXhEZXZUb29sczxNb2RlbCwgTXNnPihcbiAgZHQ6IERldlRvb2xzPE1vZGVsLCBNc2c+LFxuICBvcHRpb25zPzogUmVkdXhEZXZUb29sc09wdGlvbnMsXG4pOiBEZXZUb29sczxNb2RlbCwgTXNnPiB7XG4gIGNvbnN0IHJlZHV4RGV2dG9vbHNFeHRlbnNpb246IFJlZHV4RGV2VG9vbHNFeHRlbnNpb24gPSAod2luZG93IGFzIGFueSkuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fXztcbiAgaWYgKHJlZHV4RGV2dG9vbHNFeHRlbnNpb24pIHtcbiAgICBjb25zdCByZWR1eERldlRvb2xzID0gcmVkdXhEZXZ0b29sc0V4dGVuc2lvbi5jb25uZWN0KG9wdGlvbnMpO1xuICAgIHJlZHV4RGV2VG9vbHMuc3Vic2NyaWJlKChtZXNzYWdlOiBSZWR1eERldlRvb2xzTWVzc2FnZSkgPT4ge1xuICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ0RJU1BBVENIJyAmJiBtZXNzYWdlLnN0YXRlKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdESVNQQVRDSCcsIG1lc3NhZ2UucGF5bG9hZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnBheWxvYWQ/LnR5cGUgPT09ICdKVU1QX1RPX0FDVElPTicgfHwgbWVzc2FnZS5wYXlsb2FkPy50eXBlID09PSAnSlVNUF9UT19TVEFURScpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygndHJhdmVsbGluZyB0byAnLCBtZXNzYWdlLnBheWxvYWQuYWN0aW9uSWQpO1xuICAgICAgICAgIGR0LnRyYXZlbFRvKG1lc3NhZ2UucGF5bG9hZC5hY3Rpb25JZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCB0ZWFjdXBUb1JlZHV4TWVzc2FnZSA9IG9wdGlvbnM/LnRlYWN1cFRvUmVkdXhNZXNzYWdlIHx8IGRlZmF1bHRUZWFDdXBUb1JlZHV4TWVzc2FnZTtcbiAgICBkdC5hZGRMaXN0ZW5lcigoZSkgPT4ge1xuICAgICAgc3dpdGNoIChlLnRhZykge1xuICAgICAgICBjYXNlICdpbml0JzpcbiAgICAgICAgICByZWR1eERldlRvb2xzLmluaXQoZS5tb2RlbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3VwZGF0ZWQnOlxuICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHRlYWN1cFRvUmVkdXhNZXNzYWdlKGUubXNnKTtcbiAgICAgICAgICByZWR1eERldlRvb2xzLnNlbmQoYWN0aW9uLCBlLm1vZGVsQWZ0ZXIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBkdDtcbn1cbiJdfQ==